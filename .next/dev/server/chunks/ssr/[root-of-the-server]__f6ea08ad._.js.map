{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ChatInput/ChatInput.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ChatInput/ChatInput.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ChatInput/ChatInput.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uXAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ChatInput/ChatInput.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ChatInput/ChatInput.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ChatInput/ChatInput.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uXAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ThemeToggle.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ThemeToggle.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ThemeToggle.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uXAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ThemeToggle.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/ThemeToggle.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ThemeToggle.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,uXAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,wCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/app/page.tsx"],"sourcesContent":["\"use Clinet\";\r\n\r\nimport * as React from \"react\";\r\nimport ChatInput from \"../components/ChatInput/ChatInput\";\r\nimport ThemeToggle from \"../components/ThemeToggle\";\r\n\r\ntype Message = {\r\n  id: string | number;\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n};\r\n\r\nexport default function HomePage() {\r\n  const [messages, setMessages] = React.useState<Message[]>([]);\r\n\r\n  async function handleSend() {\r\n    const response = await fetch(\"/api/chat\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({}),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"API request failed\");\r\n    }\r\n\r\n    const reader = response.body?.getReader();\r\n    const decoder = new TextDecoder();\r\n\r\n    if (!reader) {\r\n      throw new Error(\"No reader available\");\r\n    }\r\n\r\n    // 读取流式数据\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n\r\n      const chunk = decoder.decode(value, { stream: true });\r\n      const lines = chunk\r\n        .split(\"\\n\")\r\n        .filter((line) => line.trim().startsWith(\"data: \"));\r\n\r\n      for (const line of lines) {\r\n        const data = line.slice(6).trim();\r\n        // if (data === '[DONE]') {\r\n        //   setIsLoading(false)\r\n        //   break\r\n        // }\r\n\r\n        try {\r\n          const { content } = JSON.parse(data);\r\n          setMessages((prev) =>\r\n            prev.map((msg) =>\r\n              msg.id ? { ...msg, content: msg.content + content } : msg,\r\n            ),\r\n          );\r\n        } catch (e) {\r\n          console.error(\"Failed to parse SSE data:\", e);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen flex-col bg-background\">\r\n      <header className=\"flex items-center justify-between border-b border-border px-4 py-3\">\r\n        <h1 className=\"text-xl font-semibold\">Sky Chat</h1>\r\n        <ThemeToggle />\r\n      </header>\r\n      <main className=\"flex flex-col overflow-y-auto flex-1\">\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-2xl font-semibold text-foreground\">\r\n              欢迎使用 Sky Chat\r\n            </h2>\r\n            <p className=\"mt-2 text-muted-foreground\">\r\n              开始对话，体验 SSE 流式打字机效果\r\n            </p>\r\n            <p>{messages.map((msg) => msg.content).join(\" \")}</p>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <ChatInput onClick={handleSend} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAAY,EAAE;IAE5D,eAAe;QACb,MAAM,WAAW,MAAM,MAAM,aAAa;YACxC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC,CAAC;QACxB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,SAAS,SAAS,IAAI,EAAE;QAC9B,MAAM,UAAU,IAAI;QAEpB,IAAI,CAAC,QAAQ;YACX,MAAM,IAAI,MAAM;QAClB;QAEA,SAAS;QACT,MAAO,KAAM;YACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,IAAI;YACzC,IAAI,MAAM;YAEV,MAAM,QAAQ,QAAQ,MAAM,CAAC,OAAO;gBAAE,QAAQ;YAAK;YACnD,MAAM,QAAQ,MACX,KAAK,CAAC,MACN,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,GAAG,UAAU,CAAC;YAE3C,KAAK,MAAM,QAAQ,MAAO;gBACxB,MAAM,OAAO,KAAK,KAAK,CAAC,GAAG,IAAI;gBAC/B,2BAA2B;gBAC3B,wBAAwB;gBACxB,UAAU;gBACV,IAAI;gBAEJ,IAAI;oBACF,MAAM,EAAE,OAAO,EAAE,GAAG,KAAK,KAAK,CAAC;oBAC/B,YAAY,CAAC,OACX,KAAK,GAAG,CAAC,CAAC,MACR,IAAI,EAAE,GAAG;gCAAE,GAAG,GAAG;gCAAE,SAAS,IAAI,OAAO,GAAG;4BAAQ,IAAI;gBAG5D,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,6BAA6B;gBAC7C;YACF;QACF;IACF;IAEA,qBACE,6VAAC;QAAI,WAAU;;0BACb,6VAAC;gBAAO,WAAU;;kCAChB,6VAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6VAAC,qIAAW;;;;;;;;;;;0BAEd,6VAAC;gBAAK,WAAU;0BACd,cAAA,6VAAC;oBAAI,WAAU;8BACb,cAAA,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCAAG,WAAU;0CAAyC;;;;;;0CAGvD,6VAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAG1C,6VAAC;0CAAG,SAAS,GAAG,CAAC,CAAC,MAAQ,IAAI,OAAO,EAAE,IAAI,CAAC;;;;;;;;;;;;;;;;;;;;;;0BAKlD,6VAAC,gJAAS;gBAAC,SAAS;;;;;;;;;;;;AAG1B","debugId":null}}]
}