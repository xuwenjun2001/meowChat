{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ChatInterface.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ChatInterface = registerClientReference(\n    function() { throw new Error(\"Attempted to call ChatInterface() from the server but ChatInterface is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ChatInterface.tsx <module evaluation>\",\n    \"ChatInterface\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,uXAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,8DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/components/ChatInterface.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ChatInterface = registerClientReference(\n    function() { throw new Error(\"Attempted to call ChatInterface() from the server but ChatInterface is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/ChatInterface.tsx\",\n    \"ChatInterface\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gBAAgB,IAAA,uXAAuB,EAChD;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,0CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/job/meowcat/app/chat/%5Bid%5D/page.tsx"],"sourcesContent":["import { ChatInterface } from \"@/components/ChatInterface\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { auth } from \"@/auth\";\r\nimport { notFound, redirect } from \"next/navigation\";\r\n\r\ninterface ChatPageProps {\r\n  params: Promise<{\r\n    id: string;\r\n  }>;\r\n}\r\n\r\nexport default async function ChatPage(props: ChatPageProps) {\r\n  const params = await props.params;\r\n  const session = await auth();\r\n\r\n  // 1. å®‰å…¨æ£€æŸ¥ï¼šæ²¡ç™»å½•ä¸èƒ½çœ‹\r\n  if (!session?.user?.id) {\r\n    redirect(\"/\");\r\n  }\r\n\r\n  // 2. ä»Žæ•°æ®åº“æŸ¥æ•°æ®\r\n  const chat = await prisma.chat.findUnique({\r\n    where: {\r\n      id: params.id,\r\n      userId: session.user.id, // ðŸ”’ å…³é”®ï¼šåªèƒ½æŸ¥å±žäºŽè‡ªå·±çš„å¯¹è¯\r\n    },\r\n    include: {\r\n      messages: {\r\n        orderBy: { createdAt: \"asc\" }, // æŒ‰æ—¶é—´æ­£åºæŽ’åˆ—\r\n      },\r\n    },\r\n  });\r\n\r\n  // 3. æŸ¥ä¸åˆ°ï¼ˆå¯èƒ½æ˜¯ä¹±è¾“çš„ IDï¼Œæˆ–è€…æ˜¯åˆ«äººçš„ IDï¼‰\r\n  if (!chat) {\r\n    notFound();\r\n  }\r\n\r\n  // 4. æ•°æ®æ ¼å¼è½¬æ¢\r\n  // æ•°æ®åº“é‡Œçš„å¯¹è±¡ -> UI ç»„ä»¶éœ€è¦çš„å¯¹è±¡\r\n  const uiMessages = chat.messages.map((m) => ({\r\n    id: m.id,\r\n    content: m.content,\r\n    role: m.role as \"user\" | \"assistant\",\r\n  }));\r\n\r\n  console.log(\"Loaded chat with messages:\", uiMessages);\r\n\r\n  return (\r\n    <ChatInterface id={chat.id} initialMessages={uiMessages} isOldChat={true} />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;;;;;;AAQe,eAAe,SAAS,KAAoB;IACzD,MAAM,SAAS,MAAM,MAAM,MAAM;IACjC,MAAM,UAAU,MAAM,IAAA,4GAAI;IAE1B,iBAAiB;IACjB,IAAI,CAAC,SAAS,MAAM,IAAI;QACtB,IAAA,gTAAQ,EAAC;IACX;IAEA,aAAa;IACb,MAAM,OAAO,MAAM,uHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACxC,OAAO;YACL,IAAI,OAAO,EAAE;YACb,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACzB;QACA,SAAS;YACP,UAAU;gBACR,SAAS;oBAAE,WAAW;gBAAM;YAC9B;QACF;IACF;IAEA,8BAA8B;IAC9B,IAAI,CAAC,MAAM;QACT,IAAA,gTAAQ;IACV;IAEA,YAAY;IACZ,wBAAwB;IACxB,MAAM,aAAa,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;YAC3C,IAAI,EAAE,EAAE;YACR,SAAS,EAAE,OAAO;YAClB,MAAM,EAAE,IAAI;QACd,CAAC;IAED,QAAQ,GAAG,CAAC,8BAA8B;IAE1C,qBACE,6VAAC,6IAAa;QAAC,IAAI,KAAK,EAAE;QAAE,iBAAiB;QAAY,WAAW;;;;;;AAExE","debugId":null}}]
}